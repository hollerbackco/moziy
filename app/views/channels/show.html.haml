#alert{style: "display:none"}
#player
  #youtube-player.player
    .mask
  #vimeo-player.player
    .mask
    #vimeo-dummy

#remote-control-pane.clearfix
  %h1#mosey.clearfix= link_to "mosey", root_path
  %nav.menu
    #new-channel.main-action= link_to "Build a Channel", new_manage_channel_path
    #channels-container
      - if logged_in?
        %ul.channels
          - @channel_list.each do |c|
            - if c.has_airings?
              %li.channel
                .icon= link_to image_tag(c.cover_art_url(:thumb_favicon)), channel_path(c)
                .title= link_to c.title, channel_path(c)
          %li= link_to "find more", root_path
      - else
        %h2 Top Channels
        %ul.channels
          - @top.each do |c|
            - if c.has_airings?
              %li.channel
                .icon= link_to image_tag(c.cover_art_url(:thumb_favicon)), channel_path(c)
                .title= link_to "#{c.title}", channel_path(c)

#current-pane-target-zone
  .mark +
  #current-pane
    #actions
      - if @channel && !@channel.new_record?
        %ul.buttons.clearfix
          #mute.on
          - if logged_in?
            %li.reair-actions
              .reair-button.button restream
              %ul.reair-list
                - current_user.channels.publik.each do |c|
                  %li.channel.reair{"data-channel-id" => c.id.to_s}
                    = link_to "#{c.title}", channel_path(c)
            %li
              .like.like-button.button like
      #currently-playing.clearfix
        #video-info
          .label Now Playing
          #video-title.title
            = truncate(@current.title, :length => 200, :omission => '...')
        .meta
          #video-notes= pluralize @current.note_count, "notes"
          #video-parent
            - if @current.parent.present?
              = "Restreamed from"
              = link_to @current.parent.channel.title, @current.parent.channel
    #current-channel
      #channel-info
        #coverart= image_tag(@channel.cover_art_url(:thumb_player))
        #channel-title.title= @channel.title
        #channel-description.description= @channel.description
      #channel-follow.clearfix
        #channel-actions
          - if logged_in?
            - if current_user.owns?(@channel)
              = link_to 'edit', manage_channel_videos_path(@channel), class: "button"
            - else
              - if @channel.subscribed_by?(current_user)
                = link_to unsubscribe_channel_path(@channel), class: "button" do
                  unfollow
              - else
                = link_to 'follow', subscribe_channel_path(@channel), class: "button"
          - else
            = link_to 'follow', subscribe_channel_path(@channel), class: "button"
        #channel-watchers= pluralize @channel.subscriptions.count, "follower"
      #channel-owner
        = @channel.creator.username
        %span.label curator


:javascript
  $(document).ready(function() {
    var cookie_video_id = window.App.cookie.get('channel-' + '#{@channel.id}');
    $.extend(window.App,{
      playerManager: new App.PlayerManager(cookie_video_id == "" ? '#{@current.video_id}' : cookie_video_id, '#{@channel.id}')
    })
  });
